{"version":3,"sources":["../../../../assets/Script/assets/Script/popup.js"],"names":["Emitter","require","V","cc","Class","extends","Component","properties","playAgainBtn","Node","labelScore","Label","particle","boardGame","onLoad","instance","registerEvent","_animOpenPopup","bind","node","y","active","scoreGame","game","enabled","audio","playSoundWin","tween","to","opacity","start","position","v2","easing","call","_animOpenBtnPlayAgain","string","_animScore","_animationBtn","_animHidePopup","action","repeatForever","sequence","scaleBy","scaleTo","easeBackInOut","runAction","score","value","progress","s","e","c","t","num","Math","round","String","onClickPlayAgainBtn","pauseSoundWin"],"mappings":"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","file":"popup.js","sourceRoot":"../../../../assets/Script","sourcesContent":["const Emitter = require('mEmitter');\r\nconst V = require(\"Variables\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        playAgainBtn: cc.Node,\r\n        labelScore: cc.Label,\r\n        particle: cc.Node,\r\n        boardGame: cc.Node,\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        Emitter.instance.registerEvent(\"showPopupWinGame\", this._animOpenPopup.bind(this));\r\n        this.node.y = 1100;\r\n        this.node.active = false;\r\n    },\r\n    _animOpenPopup(scoreGame) {\r\n        V.game.enabled = false\r\n        V.audio.playSoundWin(); \r\n        this.node.active = true;\r\n        this.particle.active = false;\r\n        cc.tween(this.boardGame)\r\n            .to(0.5, { opacity: 50 })\r\n            .start();\r\n\r\n        cc.tween(this.node)\r\n            .to(1, { position: cc.v2(0, 0) }, { easing: 'backInOut' })\r\n            .call(() => {\r\n                this._animOpenBtnPlayAgain();\r\n                this.labelScore.string = 0;\r\n                this._animScore(scoreGame);\r\n            })\r\n            .start();\r\n    },\r\n    _animationBtn() {\r\n    },\r\n    _animHidePopup() {\r\n        cc.tween(this.boardGame)\r\n            .to(0.5, { opacity: 255 })\r\n            .start();\r\n\r\n        cc.tween(this.node)\r\n            .to(1, { position: cc.v2(0, 1000) })\r\n            .start();\r\n    },\r\n    _animOpenBtnPlayAgain() {\r\n        let action = cc.repeatForever(\r\n            cc.sequence(\r\n                cc.scaleBy(1, 0.9, 1.1),\r\n                cc.scaleTo(1, 1, 1)\r\n            )\r\n        ).easing(cc.easeBackInOut(.5));\r\n        this.playAgainBtn.runAction(action).easing((cc.easeBackInOut(.5)));\r\n    },\r\n    _animScore(scoreGame) {\r\n        let score = { value: 0 };\r\n        cc.tween(score)\r\n            .to(2, { value: scoreGame }, {\r\n                progress: (s, e, c, t) => {\r\n                    let num = Math.round(e * t);\r\n                    this.labelScore.string = String(num);\r\n                }\r\n            })\r\n            .call(() => {\r\n                this.particle.active = true;\r\n            })\r\n            .start();\r\n    },\r\n    start() {\r\n\r\n    },\r\n    onClickPlayAgainBtn() {\r\n        V.game.enabled = true\r\n        this.node.active = false;\r\n        this._animHidePopup();\r\n        this.particle.active = false;\r\n        this.boardGame.opacity = 255;\r\n        V.audio.pauseSoundWin();\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}